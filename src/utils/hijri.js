/* eslint-disable */

const a = 28;
const b = 29;
const c = 30;
const arr = [28607, b, b, c, b, c, b, c, c, b, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, c, c, b, c, b, b, c, b, b, c, c, b, c, c, c, b, c, b, b, c, b, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, c, b, c, b, c, b, c, a, c, c, c, b, c, b, c, b, c, b, c, b, c, b, c, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, c, b, c, b, c, b, c, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, c, b, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, c, b, b, c, c, c, b, c, b, c, b, c, b, b, c, c, b, b, c, b, b, c, c, c, b, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, c, b, c, b, c, b, c, b, c, b, c, b, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, b, b, c, b, c, b, c, b, c, c, b, c, c, b, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, b, c, b, c, c, c, b, c, c, b, b, c, b, c, b, c, b, c, c, b, b, c, b, c, b, c, b, c, b, c, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, c, b, c, b, c, b, c, c, b, c, b, b, c, b, c, b, c, b, c, b, c, b, c, c, b, b, c, b, c, b, c, b, c, b, c, c, c, b, c, b, b, b, c, b, c, b, c, c, c, b, c, b, c, b, c, b, b, c, c, b, c, b, c, c, b, c, b, b, c, b, c, b, c, b, c, c, c, b, c, b, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, c, b, c, c, b, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, b, c, c, b, c, c, c, b, c, b, b, c, b, b, c, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, b, c, b, c, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, b, c, c, b, c, c, c, b, c, b, b, c, b, b, c, c, b, c, c, b, c, c, b, b, c, b, b, c, b, c, c, c, b, c, b, c, b, c, b, b, c, b, c, c, b, c, c, b, c, b, c, b, c, b, b, c, b, c, c, b, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, c, b, b, c, b, c, c, c, c, b, c, b, b, c, b, b, b, c, c, c, c, b, c, c, b, b, c, b, b, b, c, c, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, c, b, c, b, c, c, b, c, b, c, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, b, c, c, c, b, c, c, b, c, b, b, c, b, b, c, c, c, b, c, c, b, c, b, b, c, b, b, c, c, b, c, c, b, c, c, b, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, b, c, b, c, c, c, b, c, b, c, b, c, b, b, c, b, c, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, c, b, b, c, b, c, b, b, c, c, b, c, c, c, b, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, c, b, b, c, b, c, b, c, b, c, c, c, b, c, b, b, c, b, b, c, b, c, c, c, c, b, c, b, b, c, b, b, c, b, c, c, c, b, c, b, c, b, c, b, b, c, b, c, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, c, b, c, b, c, c, c, b, c, b, b, c, b, c, b, c, b, c, c, c, b, b, c, b, c, b, c, b, b, c, c, c, b, c, b, c, b, c, b, c, b, b, c, c, b, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, b, c, c, b, c, c, c, b, c, b, b, c, b, b, c, c, b, c, c, c, b, c, b, b, c, b, b, c, c, b, c, c, b, c, b, c, b, c, b, b, c, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, b, c, b, c, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, b, c, c, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, b, c, c, b, c, c, b, c, c, b, b, c, b, b, c, c, b, c, b, c, c, c, b, b, c, b, b, c, b, c, c, b, c, c, b, c, b, c, b, c, b, b, c, b, c, c, b, c, b, c, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, c, b, c, b, c, c, c, b, c, b, b, c, b, b, c, b, c, c, c, b, c, c, b, b, c, b, b, c, b, c, c, b, c, c, c, b, b, c, b, b, c, b, c, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, b, c, c, b, b, c, b, c, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, b, c, c, b, c, c, c, b, c, b, b, c, b, b, c, c, b, c, c, b, c, c, b, b, c, b, b, c, c, b, c, c, b, c, c, b, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, b, c, b, c, c, b, c, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, c, b, b, c, b, c, b, c, b, c, c, b, c, b, c, c, b, b, c, b, c, b, c, b, c, c, b, c, c, b, b, c, b, c, b, b, c, c, b, c, c, c, b, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, c, b, c, c, c, b, c, b, c, b, b, c, b, c, b, c, c, b, c, c, b, b, c, b, c, b, c, b, c, b, c, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, b, c, c, b, c, c, b, b, c, b, b, c, b, c, c, c];
const UMMALQURA_DAT = [];
for (let i = 0; i < arr.length; i++) {
  UMMALQURA_DAT.push(
    (UMMALQURA_DAT[i - 1] || 0) + arr[i],
  );
}

const exp = {}
exp.julianToGregorian = function julianToGregorian(julianDate) {
    //source from: http://keith-wood.name/calendars.html
    var z = Math.floor(julianDate + 0.5);
    var a = Math.floor((z - 1867216.25) / 36524.25);
    a = z + 1 + a - Math.floor(a / 4);
    var b = a + 1524;
    var c = Math.floor((b - 122.1) / 365.25);
    var d = Math.floor(365.25 * c);
    var e = Math.floor((b - d) / 30.6001);
    var day = b - d - Math.floor(e * 30.6001);
    var month = e - (e > 13.5 ? 13 : 1);
    var year = c - (month > 2.5 ? 4716 : 4715);
    if (year <= 0) {
        year--;
    }// No year zero
    return [year, month - 1, day]
    // return new Date(year + "/" + (month+1) + "/" + day);
}

exp.gregorianToHijri = function gregorianToHijri(pYear, pMonth, pDay) { // month is not index, is month number
  // This code the modified version of R.H. van Gent Code, it can be found at http://www.staff.science.uu.nl/~gent0113/islam/ummalqura.htm
  // read calendar data
  pMonth++
  let day = parseInt(pDay);
  let month = parseInt(pMonth) - 1; // Here we enter the Index of the month (which starts with Zero)
  let year = parseInt(pYear);

  let m = month + 1;
  let y = year;

  // append January and February to the previous year (i.e. regard March as
  // the first month of the year in order to simplify leapday corrections)

  if (m < 3) {
    y -= 1;
    m += 12;
  }

  // determine offset between Julian and Gregorian calendar

  let a = Math.floor(y / 100.0);
  let jgc = a - Math.floor(a / 4.0) - 2;

  // compute Chronological Julian Day Number (CJDN)

  const cjdn = Math.floor(365.25 * (y + 4716)) + Math.floor(30.6001 * (m + 1)) + day - jgc - 1524;

  a = Math.floor((cjdn - 1867216.25) / 36524.25);
  jgc = a - Math.floor(a / 4.0) + 1;
  const b = cjdn + jgc + 1524;
  let c = Math.floor((b - 122.1) / 365.25);
  const d = Math.floor(365.25 * c);
  month = Math.floor((b - d) / 30.6001);
  day = (b - d) - Math.floor(30.6001 * month);

  if (month > 13) {
    c += 1;
    month -= 12;
  }

  month -= 1;
  year = c - 4716;


  // compute Modified Chronological Julian Day Number (MCJDN)

  const mcjdn = cjdn - 2400000;

  // the MCJDN's of the start of the lunations in the Umm al-Qura calendar are stored in 'islamcalendar_dat.js'

  for (var i = 0; i < UMMALQURA_DAT.length; i++) {
    if (UMMALQURA_DAT[i] > mcjdn) break;
  }

  // compute and output the Umm al-Qura calendar date

  const iln = i + 16260;
  const ii = Math.floor((iln - 1) / 12);
  const iy = ii + 1;
  const im = (iln - 12 * ii) - 1;
  const id = mcjdn - UMMALQURA_DAT[i - 1] + 1;
  //   const ml = UMMALQURA_DAT[i] - UMMALQURA_DAT[i - 1];
  return [iy, im, id];
}

exp.hijriToGregorian = function hijriToGregorian(year, month, day) {
    month++
    var iy = year;
    var im = month;
    var id = day;
    var ii = iy -1;
    var iln = (ii *12)+1 + (im-1);
    var i = iln - 16260;
    var mcjdn = id + UMMALQURA_DAT[i - 1] -1;
    var cjdn = mcjdn + 2400000;
    return exp.julianToGregorian(cjdn);

}

export default exp